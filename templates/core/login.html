{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inicio de Sesión - Agropecuaria Guardia Ramírez</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <link rel="shortcut icon" href="{% static 'img/favicon_transparente.png' %}" type="image/x-icon">

    <link rel="stylesheet" href="{% static 'styles/normalize.css' %}">
    <link rel="stylesheet" href="{% static 'styles/login.css' %}">
    <link rel="stylesheet" href="{% static 'styles/loader.css' %}">
</head>
<body class="bg-light-beige d-flex flex-column min-vh-100">

    <div id="background-slideshow"></div>

    <header class="header bg-pure-white d-flex align-items-center py-3 px-4 shadow-sm gap-2">
        <div class="logo-container d-flex align-items-center">
            <img src="{% static 'img/favicon_transparente.png' %}" alt="Logo Agropecuaria Guardia Ramírez" class="header-logo">
            <h2 class="company-name main-text-color mb-0 fw-bold">Agropecuaria Guardia Ramírez</h2>
        </div>
        <a href="/" class="return-link btn btn-secondary-main">Volver</a>
    </header>

    <main class="flex-grow-1 d-flex align-items-center justify-content-center">
        <div class="card login-card p-4 shadow-lg border-0">
            <div class="card-body text-center">
                <img src="{% static 'img/favicon_transparente.png' %}" alt="Logo Agropecuaria Guardia Ramírez" class="login-logo mb-3">
                <h1 class="card-title main-text-color">Agropecuaria Guardia Ramírez</h1>
                <h2 class="secondary-text-color mb-4">Iniciar Sesión</h2>
                
                {% if form.errors %}
                <div class="alert alert-danger" role="alert">
                    Usuario o contraseña incorrectos. Por favor, inténtelo de nuevo.
                </div>
                {% endif %}

                <form method="post" id="login-form">
                    {% csrf_token %}
                    <div class="mb-3">
                        <label for="id_username" class="form-label secondary-text-color">Usuario</label>
                        <input type="text" class="form-control" id="id_username" name="username" required>
                    </div>
                    <div class="mb-3">
                        <label for="id_password" class="form-label secondary-text-color">Contraseña</label>
                        <div class="input-group">
                            <input type="password" class="form-control" id="id_password" name="password" required>
                            <button class="btn btn-outline-secondary" type="button" id="togglePassword">
                                <i class="fa fa-eye" id="toggleIcon"></i>
                            </button>
                        </div>
                    </div>
                    <div class="d-grid gap-2 mt-4">
                        <button type="submit" class="btn btn-primary-main">Iniciar Sesión</button>
                    </div>
                    <p class="text-center mt-3">
                        <a href="{% url 'password_reset' %}" class="secondary-button-text">¿Olvidaste tu contraseña?</a>
                    </p>
                </form>
            </div>
        </div>
    </main>

    <div id="loader-container" class="loader-container">
        <div class="loader-spinner">
            <?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg version="1.1" id="cog9_1_" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="-13 -13 45 45" enable-background="new 0 0 96 96" xml:space="preserve"><style>.box5631 {
                transform-origin: 50% 50%;
                fill:#FBC02D;
            }

            @keyframes moveBox5631-1 {
                9.0909090909% {
                    transform: translate(-12px, 0);
                }

                18.1818181818% {
                    transform: translate(0px, 0);
                }

                27.2727272727% {
                    transform: translate(0px, 0);
                }

                36.3636363636% {
                    transform: translate(12px, 0);
                }

                45.4545454545% {
                    transform: translate(12px, 12px);
                }

                54.5454545455% {
                    transform: translate(12px, 12px);
                }

                63.6363636364% {
                    transform: translate(12px, 12px);
                }

                72.7272727273% {
                    transform: translate(12px, 0px);
                }

                81.8181818182% {
                    transform: translate(0px, 0px);
                }

                90.9090909091% {
                    transform: translate(-12px, 0px);
                }

                100% {
                    transform: translate(0px, 0px);
                }
            }

            .box5631:nth-child(1) {
                animation: moveBox5631-1 4s infinite;

            }

            @keyframes moveBox5631-2 {
                9.0909090909% {
                    transform: translate(0, 0);
                }

                18.1818181818% {
                    transform: translate(12px, 0);
                }

                27.2727272727% {
                    transform: translate(0px, 0);
                }

                36.3636363636% {
                    transform: translate(12px, 0);
                }

                45.4545454545% {
                    transform: translate(12px, 12px);
                }

                54.5454545455% {
                    transform: translate(12px, 12px);
                }

                63.6363636364% {
                    transform: translate(12px, 12px);
                }

                72.7272727273% {
                    transform: translate(12px, 12px);
                }

                81.8181818182% {
                    transform: translate(0px, 12px);
                }

                90.9090909091% {
                    transform: translate(0px, 12px);
                }

                100% {
                    transform: translate(0px, 0px);
                }
            }

            .box5631:nth-child(2) {
                animation: moveBox5631-2 4s infinite;
            }

            @keyframes moveBox5631-3 {
                9.0909090909% {
                    transform: translate(-12px, 0);
                }

                18.1818181818% {
                    transform: translate(-12px, 0);
                }

                27.2727272727% {
                    transform: translate(0px, 0);
                }

                36.3636363636% {
                    transform: translate(-12px, 0);
                }

                45.4545454545% {
                    transform: translate(-12px, 0);
                }

                54.5454545455% {
                    transform: translate(-12px, 0);
                }

                63.6363636364% {
                    transform: translate(-12px, 0);
                }

                72.7272727273% {
                    transform: translate(-12px, 0);
                }

                81.8181818182% {
                    transform: translate(-12px, -12px);
                }

                90.9090909091% {
                    transform: translate(0px, -12px);
                }

                100% {
                    transform: translate(0px, 0px);
                }
            }

            .box5631:nth-child(3) {
                animation: moveBox5631-3 4s infinite;
            }

            @keyframes moveBox5631-4 {
                9.0909090909% {
                    transform: translate(-12px, 0);
                }

                18.1818181818% {
                    transform: translate(-12px, 0);
                }

                27.2727272727% {
                    transform: translate(-12px, -12px);
                }

                36.3636363636% {
                    transform: translate(0px, -12px);
                }

                45.4545454545% {
                    transform: translate(0px, 0px);
                }

                54.5454545455% {
                    transform: translate(0px, -12px);
                }

                63.6363636364% {
                    transform: translate(0px, -12px);
                }

                72.7272727273% {
                    transform: translate(0px, -12px);
                }

                81.8181818182% {
                    transform: translate(-12px, -12px);
                }

                90.9090909091% {
                    transform: translate(-12px, 0px);
                }

                100% {
                    transform: translate(0px, 0px);
                }
            }

            .box5631:nth-child(4) {
                animation: moveBox5631-4 4s infinite;
            }

            @keyframes moveBox5631-5 {
                9.0909090909% {
                    transform: translate(0, 0);
                }

                18.1818181818% {
                    transform: translate(0, 0);
                }

                27.2727272727% {
                    transform: translate(0, 0);
                }

                36.3636363636% {
                    transform: translate(12px, 0);
                }

                45.4545454545% {
                    transform: translate(12px, 0);
                }

                54.5454545455% {
                    transform: translate(12px, 0);
                }

                63.6363636364% {
                    transform: translate(12px, 0);
                }

                72.7272727273% {
                    transform: translate(12px, 0);
                }

                81.8181818182% {
                    transform: translate(12px, -12px);
                }

                90.9090909091% {
                    transform: translate(0px, -12px);
                }

                100% {
                    transform: translate(0px, 0px);
                }
            }

            .box5631:nth-child(5) {
                animation: moveBox5631-5 4s infinite;
            }

            @keyframes moveBox5631-6 {
                9.0909090909% {
                    transform: translate(0, 0);
                }

                18.1818181818% {
                    transform: translate(-12px, 0);
                }

                27.2727272727% {
                    transform: translate(-12px, 0);
                }

                36.3636363636% {
                    transform: translate(0px, 0);
                }

                45.4545454545% {
                    transform: translate(0px, 0);
                }

                54.5454545455% {
                    transform: translate(0px, 0);
                }

                63.6363636364% {
                    transform: translate(0px, 0);
                }

                72.7272727273% {
                    transform: translate(0px, 12px);
                }

                81.8181818182% {
                    transform: translate(-12px, 12px);
                }

                90.9090909091% {
                    transform: translate(-12px, 0px);
                }

                100% {
                    transform: translate(0px, 0px);
                }
            }

            .box5631:nth-child(6) {
                animation: moveBox5631-6 4s infinite;
            }

            @keyframes moveBox5631-7 {
                9.0909090909% {
                    transform: translate(12px, 0);
                }

                18.1818181818% {
                    transform: translate(12px, 0);
                }

                27.2727272727% {
                    transform: translate(12px, 0);
                }

                36.3636363636% {
                    transform: translate(0px, 0);
                }

                45.4545454545% {
                    transform: translate(0px, -12px);
                }

                54.5454545455% {
                    transform: translate(12px, -12px);
                }

                63.6363636364% {
                    transform: translate(0px, -12px);
                }

                72.7272727273% {
                    transform: translate(0px, -12px);
                }

                81.8181818182% {
                    transform: translate(0px, 0px);
                }

                90.9090909091% {
                    transform: translate(12px, 0px);
                }

                100% {
                    transform: translate(0px, 0px);
                }
            }

            .box5631:nth-child(7) {
                animation: moveBox5631-7 4s infinite;
            }

            @keyframes moveBox5631-8 {
                9.0909090909% {
                    transform: translate(0, 0);
                }

                18.1818181818% {
                    transform: translate(-12px, 0);
                }

                27.2727272727% {
                    transform: translate(-12px, -12px);
                }

                36.3636363636% {
                    transform: translate(0px, -12px);
                }

                45.4545454545% {
                    transform: translate(0px, -12px);
                }

                54.5454545455% {
                    transform: translate(0px, -12px);
                }

                63.6363636364% {
                    transform: translate(0px, -12px);
                }

                72.7272727273% {
                    transform: translate(0px, -12px);
                }

                81.8181818182% {
                    transform: translate(12px, -12px);
                }

                90.9090909091% {
                    transform: translate(12px, 0px);
                }

                100% {
                    transform: translate(0px, 0px);
                }
            }

            .box5631:nth-child(8) {
                animation: moveBox5631-8 4s infinite;
            }

            @keyframes moveBox5631-9 {
                9.0909090909% {
                    transform: translate(-12px, 0);
                }

                18.1818181818% {
                    transform: translate(-12px, 0);
                }

                27.2727272727% {
                    transform: translate(0px, 0);
                }

                36.3636363636% {
                    transform: translate(-12px, 0);
                }

                45.4545454545% {
                    transform: translate(0px, 0);
                }

                54.5454545455% {
                    transform: translate(0px, 0);
                }

                63.6363636364% {
                    transform: translate(-12px, 0);
                }

                72.7272727273% {
                    transform: translate(-12px, 0);
                }

                81.8181818182% {
                    transform: translate(-24px, 0);
                }

                90.9090909091% {
                    transform: translate(-12px, 0);
                }

                100% {
                    transform: translate(0px, 0);
                }
            }

            .box5631:nth-child(9) {
                animation: moveBox5631-9 4s infinite;
            }</style><g><circle class="box5631" cx="13" cy="1" r="5"/><circle class="box5631" cx="13" cy="1" r="5"/><circle class="box5631" cx="25" cy="25" r="5"/><circle class="box5631" cx="13" cy="13" r="5"/><circle class="box5631" cx="13" cy="13" r="5"/><circle class="box5631" cx="25" cy="13" r="5"/><circle class="box5631" cx="1" cy="25" r="5"/><circle class="box5631" cx="13" cy="25" r="5"/><circle class="box5631" cx="25" cy="25" r="5"/></g></svg>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <script>
        // Función para cambiar el fondo dinámico
        const backgroundImages = [
            "{% static 'img/login/photo_login1.jpg' %}",
            "{% static 'img/login/photo_login2.jpg' %}",
            "{% static 'img/login/photo_login3.jpg' %}",
            "{% static 'img/login/photo_login4.jpg' %}"
        ];
    </script>
    <script src="{% static 'js/core/loader.js' %}"></script>
    <script src="{% static 'js/core/login.js' %}"></script>

    <div class="modal fade" id="errorModal" tabindex="-1" aria-labelledby="errorModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title secondary-button-text" id="errorModalLabel">Error de Validación</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p id="error-message" class="main-text-color"></p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary-main" data-bs-dismiss="modal">Cerrar</button>
                </div>
            </div>
        </div>
    </div>
</body>
</html>